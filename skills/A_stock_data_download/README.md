# A股数据下载工具

基于 Baostock 的 A 股历史数据批量下载工具，支持自动获取全市场股票列表并下载日线数据。

## 功能特点

- ✅ 自动获取全市场 A 股列表
- ✅ 批量下载历史日线数据
- ✅ 支持前复权/后复权/不复权
- ✅ 数据保存为 CSV 格式
- ✅ 实时显示下载进度
- ✅ 统计成功/失败数量

## 环境要求

- Python 3.7+
- 依赖库：
  - baostock >= 0.8.8
  - pandas >= 2.0.0

## 安装依赖

```bash
pip install baostock pandas
```

或使用项目根目录的 requirements.txt：

```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 配置参数

编辑 [a_stock_download_baostock.py](a_stock_download_baostock.py) 文件中的配置区：

```python
# ===================== 配置区 =====================
START_DATE = "2025-01-01"  # 起始日期
END_DATE   = "2026-02-08"  # 结束日期
SAVE_DIR   = "A股近10年日线数据"  # 保存目录
ADJUSTFLAG = "3"  # 3=前复权，1=后复权，2=不复权
# ==================================================
```

**参数说明：**

| 参数 | 说明 | 示例 |
|------|------|------|
| `START_DATE` | 数据起始日期 | `"2016-01-01"` |
| `START_DATE` | 数据起始日期 | `"2016-01-01"` |
| `START_DATE` | 数据起始日期 | `"2016-01-01"` |
| `END_DATE` | 数据结束日期 | `"2026-02-08"` |
| `SAVE_DIR` | 数据保存目录 | `"A股近10年日线数据"` |
| `ADJUSTFLAG` | 复权类型 | `"3"`（前复权）、`"1"`（后复权）、`"2"`（不复权） |

### 2. 运行脚本

```bash
python a_stock_download_baostock.py
```

### 3. 输出结果

脚本会在指定的 `SAVE_DIR` 目录下生成 CSV 文件，每个股票一个文件：

```
A股近10年日线数据/
  ├── sh.600000_浦发银行_近10年日线.csv
  ├── sh.600001_邯郸钢铁_近10年日线.csv
  ├── sz.000001_平安银行_近10年日线.csv
  └── ...
```

## 数据字段说明

下载的 CSV 文件包含以下字段：

| 字段 | 说明 |
|------|------|
| `date` | 交易日期 |
| `open` | 开盘价 |
| `high` | 最高价 |
| `low` | 最低价 |
| `close` | 收盘价 |
| `volume` | 成交量 |
| `amount` | 成交额 |
| `pctChg` | 涨跌幅 (%) |

## 运行示例

```bash
$ python a_stock_download_baostock.py

Baostock 登录成功
正在获取全市场 A 股列表...
共获取到 5234 只 A 股
正在下载: sh.600000 浦发银行 (1/5234)
正在下载: sh.600001 邯郸钢铁 (2/5234)
...

===== 下载完成 =====
成功: 5200 只
失败: 34 只
数据保存在: /Users/ellen_li/2026projects/my-skills/skills/A_stock_data_download/A股近10年日线数据
```

## 注意事项

1. **下载时间**：全市场数据下载需要较长时间（约 30-60 分钟），请耐心等待
2. **网络连接**：确保网络连接稳定，避免下载中断
3. **数据更新**：Baostock 数据通常在交易日收盘后更新
4. **存储空间**：确保有足够的磁盘空间（全市场数据约 1-2 GB）
5. **复权方式**：
   - **前复权**（推荐）：适合技术分析，消除除权缺口
   - **后复权**：保持最新价格不变
   - **不复权**：保持历史真实价格

## 常见问题

### Q1: 登录失败怎么办？

A: Baostock 是免费数据源，无需注册。如果登录失败，请检查网络连接或稍后重试。

### Q2: 某些股票下载失败？

A: 可能原因：
- 股票在指定日期区间内未上市
- 该股票无交易数据
- 网络波动导致请求失败

### Q3: 如何只下载特定股票？

A: 可以修改代码中的 `stock_list`，手动指定股票代码列表：

```python
# 替换自动获取的股票列表
stock_list = pd.DataFrame({
    'code': ['sh.600000', 'sz.000001'],
    'code_name': ['浦发银行', '平安银行']
})
```

## 数据来源

本工具使用 [Baostock](http://baostock.com/) 作为数据源：
- 免费、开源的证券数据平台
- 提供沪深 A 股历史行情数据
- 数据准确可靠，适合量化分析

## 许可证

本项目仅供学习和研究使用。

## 相关链接

- [Baostock 官网](http://baostock.com/)
- [Baostock 文档](http://baostock.com/baostock/index.php/Python_API%E6%96%87%E6%A1%A3)
