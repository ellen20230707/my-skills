# 每日股票推荐 - 需求说明

## 核心需求

每天晚上22:00根据 `my-skills/skills/stock_macd_volumn` 的分析结果，整理出第二天推荐买入的股票，并给出详细理由。

## 功能要求

### 1. 自动化运行
- 每天22:00自动执行
- 通过cron定时任务实现
- 确保在数据更新(21:00)之后运行

### 2. 分析和筛选
- 基于stock_macd_volumn的技术分析
- 使用实盘模式（不验证未来涨幅）
- 筛选高质量股票（A级和B级）
- 综合评分排序

### 3. 推荐理由
为每只推荐股票提供：
- MACD趋势分析
- 成交量变化说明
- 位置分析（距离均线）
- 补充指标情况（RSI、KDJ、布林带等）
- 价格形态识别
- 综合评级说明

### 4. 报告输出
生成三种格式：
- **文本报告**：便于终端查看和日志记录
- **HTML报告**：精美网页格式，便于浏览器查看
- **JSON数据**：便于程序读取和进一步处理

### 5. 推荐数量
- 默认推荐前20只股票
- 可配置调整

## 技术实现

### 依赖工具
- stock_macd_volumn：核心技术分析引擎
- Python pandas：数据处理
- cron：定时任务调度

### 工作流程
```
1. 调用 stock_trend_analyzer 进行全市场分析
2. 读取分析结果CSV文件
3. 按条件筛选和排序
4. 生成买入理由
5. 输出多种格式报告
```

### 评分算法
```python
综合得分 = MACD评分 × 0.3 + 成交量比率 × 10 + 补充特征分 × 0.4
```

## 使用场景

### 场景1：每日自动推荐
- 22:00自动运行
- 次日早上查看报告
- 决定买入标的

### 场景2：手动触发
- 盘中需要决策时手动运行
- 获取实时推荐

## 输出示例

### 推荐股票信息
每只股票包含：
- 股票代码和名称
- 信号日期
- 当前价格
- MACD评分
- 成交量比率
- MA60距离
- 综合评级
- 详细买入理由

### 市场概况
- 分析股票总数
- 发现信号总数
- 有信号股票数
- 评级分布

## 风险提示

报告中包含明确的风险提示：
- 仅供参考，不构成投资建议
- 股市有风险，投资需谨慎
- 建议结合个人情况判断
- 建议设置止损位

## 成功标准

- ✅ 能够自动在22:00执行
- ✅ 正确读取和分析数据
- ✅ 筛选出高质量推荐
- ✅ 生成详细的买入理由
- ✅ 输出多种格式报告
- ✅ 日志记录完整
